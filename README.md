# WhatsApp Pro - Sistema de Automatización con Planes de Pago\n\nUna aplicación completa para automatizar WhatsApp Business con sistema de suscripciones, integración PayPal y panel de administración.\n\n## 🚀 Funcionalidades Principales\n\n### 💰 Sistema de Planes y Pagos\n- **Prueba Gratuita**: 1 día de acceso con 1 sesión\n- **Plan Mensual**: $7 USD - 30 días, 1 sesión\n- **Plan Semestral**: $37.8 USD (10% descuento) - 180 días, 1 sesión\n- **Plan Anual**: $67.2 USD (20% descuento) - 365 días, 1 sesión\n- **Plan Vitalicio**: $100 USD - Acceso permanente, hasta 15 sesiones\n- Integración completa con PayPal para procesamiento de pagos\n- Actualización automática de membresías tras pago exitoso\n\n### 📱 Gestión de Sesiones WhatsApp\n- Creación y gestión de sesiones de WhatsApp\n- Límites de sesiones según el plan del usuario\n- Conexión mediante código SMS (6 dígitos, 30 segundos)\n- Estados en tiempo real: connecting, connected, disconnected\n- Actualizaciones automáticas cada 5 segundos\n- Auto-eliminación de sesiones previas al crear nuevas\n\n### 🎨 Interfaz de Usuario\n- **Landing Page** profesional con testimonios y características\n- **Página de Precios** con comparación de planes\n- **Dashboard** con estadísticas y gestión de sesiones\n- **Panel de Upgrade** con integración PayPal\n- Diseño responsive y dark mode\n- Indicadores visuales de estado del plan\n\n### 👨‍💼 Panel de Administración\n- Gestión completa de planes de suscripción\n- Crear, editar y eliminar planes personalizados\n- Configurar precios, descuentos y características\n- Control de usuarios y membresías\n- Estadísticas y analytics\n\n### 🔐 Seguridad y Autenticación\n- JWT para autenticación segura\n- Middleware de protección de rutas\n- Validación de límites según plan del usuario\n- Manejo seguro de tokens de PayPal\n\n## 🏗️ Estructura del Proyecto\n\n`\nsrc/\n├── app/                          # App Router de Next.js\n│   ├── page.tsx                 # Landing page\n│   ├── pricing/                 # Página de precios\n│   ├── auth/                    # Autenticación\n│   ├── dashboard/               # Panel del usuario\n│   │   ├── page.tsx            # Dashboard principal\n│   │   ├── sessions/           # Gestión de sesiones\n│   │   ├── upgrade/            # Actualizar plan\n│   │   └── settings/           # Configuración\n│   └── admin/                   # Panel de administración\n│       ├── plans/              # Gestión de planes\n│       ├── users/              # Gestión de usuarios\n│       └── memberships/        # Gestión de membresías\n├── components/\n│   ├── ui/                     # Componentes base (shadcn/ui)\n│   └── dashboard/              # Componentes específicos\n├── store/                      # Estado global (Zustand)\n│   ├── auth.ts                # Autenticación\n│   ├── sessions.ts            # Sesiones WhatsApp\n│   └── plans.ts               # Planes y pagos\n├── lib/                       # Utilidades\n│   ├── api.ts                 # Cliente API\n│   ├── plans.ts               # Lógica de planes\n│   └── utils.ts               # Utilidades generales\n└── types/                     # Definiciones TypeScript\n`\n\n## 🔧 Configuración\n\n### Variables de Entorno\n`env\n# API Backend\nNEXT_PUBLIC_API_URL=https://backend.autosystemprojects.site\n\n# PayPal\nNEXT_PUBLIC_PAYPAL_CLIENT_ID=your_paypal_client_id\nPAYPAL_CLIENT_SECRET=your_paypal_secret\n\n# Entorno\nNODE_ENV=development\n`\n\n### Instalación\n`bash\n# Instalar dependencias\nnpm install\n\n# Ejecutar en desarrollo\nnpm run dev\n\n# Construir para producción\nnpm run build\nnpm start\n`\n\n## 📡 Endpoints de la API\n\n### Autenticación\n- `POST /api/auth/signup` - Registro de usuario\n- `POST /api/auth/signin` - Inicio de sesión\n- `POST /api/auth/deleteUser/` - Eliminar usuario\n- `POST /api/auth/renew-membership` - Renovar membresía\n\n### Sesiones WhatsApp\n- `GET /sessions/list` - Listar sesiones\n- `POST /sessions/add` - Crear sesión (form-data)\n- `DELETE /sessions/delete/{id}` - Eliminar sesión\n- `GET /sessions/status/{id}` - Estado de sesión\n\n### Chats\n- `POST /chats/send?id={sessionId}` - Enviar mensaje\n- `GET /chats?id={sessionId}` - Listar chats\n- `GET /chats/{jid}?id={sessionId}` - Conversación específica\n\n## 💳 Flujo de Pagos\n\n1. **Selección de Plan**: Usuario elige plan en `/pricing` o `/dashboard/upgrade`\n2. **Configuración PayPal**: SDK se carga automáticamente\n3. **Procesamiento**: PayPal maneja el pago de forma segura\n4. **Confirmación**: Callback actualiza la membresía del usuario\n5. **Activación**: Nuevo token JWT con plan actualizado\n6. **Redirección**: Usuario regresa al dashboard con plan activo\n\n## 🔄 Flujo de Sesiones\n\n1. **Validación**: Verificar límites según plan del usuario\n2. **Limpieza**: Eliminar sesiones previas (deleteUser + deleteSession)\n3. **Creación**: POST a `/sessions/add` con datos del bot\n4. **Código**: Backend retorna código de 6 dígitos (30s)\n5. **Verificación**: Usuario ingresa código en WhatsApp\n6. **Monitoreo**: Polling automático del estado cada 5s\n7. **Conexión**: Estado cambia a 'connected' cuando es exitoso\n\n## 🎯 Características Técnicas\n\n- **Next.js 14** con App Router\n- **TypeScript** para type-safety\n- **Tailwind CSS** para estilos\n- **Zustand** para estado global\n- **React Hook Form** con validación Zod\n- **Axios** para llamadas HTTP\n- **JWT** para autenticación\n- **PayPal SDK** para pagos\n- **Radix UI** para componentes base\n- **Lucide React** para iconos\n\n## 🚦 Estados y Validaciones\n\n### Estados de Sesión\n- `connecting` - Estableciendo conexión\n- `connected` - Conectado pero no autenticado\n- `authenticated` - Completamente funcional\n- `disconnecting` - Desconectando\n- `disconnected` - Sin conexión\n\n### Límites por Plan\n- **Básico/Mensual/Semestral/Anual**: 1 sesión máximo\n- **Vitalicio**: 15 sesiones máximo\n- Validación en frontend y backend\n- Mensajes informativos al usuario\n\n### Expiración de Membresía\n- Alertas a los 7 días de expiración\n- Bloqueo de funciones al expirar\n- Botones de renovación prominentes\n- Cálculo automático de días restantes\n\n## 🔒 Seguridad Implementada\n\n- Headers CORS configurados\n- Validación de tokens JWT\n- Sanitización de inputs\n- Límites de rate limiting\n- Encriptación SSL para pagos\n- Protección contra XSS y CSRF\n- Validación de esquemas con Zod\n\n## 📈 Próximas Funcionalidades\n\n- [ ] Webhooks para eventos de WhatsApp\n- [ ] Plantillas de mensajes\n- [ ] Programación de mensajes\n- [ ] Analytics avanzados\n- [ ] API para integraciones\n- [ ] Chat en vivo con clientes\n- [ ] Campañas masivas\n- [ ] Integración con CRM\n\n---\n\n**Desarrollado con ❤️ para automatización de WhatsApp Business**\n
