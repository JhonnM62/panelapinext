# WhatsApp Pro - Sistema de AutomatizaciÃ³n con Planes de Pago\n\nUna aplicaciÃ³n completa para automatizar WhatsApp Business con sistema de suscripciones, integraciÃ³n PayPal y panel de administraciÃ³n.\n\n## ğŸš€ Funcionalidades Principales\n\n### ğŸ’° Sistema de Planes y Pagos\n- **Prueba Gratuita**: 1 dÃ­a de acceso con 1 sesiÃ³n\n- **Plan Mensual**: $7 USD - 30 dÃ­as, 1 sesiÃ³n\n- **Plan Semestral**: $37.8 USD (10% descuento) - 180 dÃ­as, 1 sesiÃ³n\n- **Plan Anual**: $67.2 USD (20% descuento) - 365 dÃ­as, 1 sesiÃ³n\n- **Plan Vitalicio**: $100 USD - Acceso permanente, hasta 15 sesiones\n- IntegraciÃ³n completa con PayPal para procesamiento de pagos\n- ActualizaciÃ³n automÃ¡tica de membresÃ­as tras pago exitoso\n\n### ğŸ“± GestiÃ³n de Sesiones WhatsApp\n- CreaciÃ³n y gestiÃ³n de sesiones de WhatsApp\n- LÃ­mites de sesiones segÃºn el plan del usuario\n- ConexiÃ³n mediante cÃ³digo SMS (6 dÃ­gitos, 30 segundos)\n- Estados en tiempo real: connecting, connected, disconnected\n- Actualizaciones automÃ¡ticas cada 5 segundos\n- Auto-eliminaciÃ³n de sesiones previas al crear nuevas\n\n### ğŸ¨ Interfaz de Usuario\n- **Landing Page** profesional con testimonios y caracterÃ­sticas\n- **PÃ¡gina de Precios** con comparaciÃ³n de planes\n- **Dashboard** con estadÃ­sticas y gestiÃ³n de sesiones\n- **Panel de Upgrade** con integraciÃ³n PayPal\n- DiseÃ±o responsive y dark mode\n- Indicadores visuales de estado del plan\n\n### ğŸ‘¨â€ğŸ’¼ Panel de AdministraciÃ³n\n- GestiÃ³n completa de planes de suscripciÃ³n\n- Crear, editar y eliminar planes personalizados\n- Configurar precios, descuentos y caracterÃ­sticas\n- Control de usuarios y membresÃ­as\n- EstadÃ­sticas y analytics\n\n### ğŸ” Seguridad y AutenticaciÃ³n\n- JWT para autenticaciÃ³n segura\n- Middleware de protecciÃ³n de rutas\n- ValidaciÃ³n de lÃ­mites segÃºn plan del usuario\n- Manejo seguro de tokens de PayPal\n\n## ğŸ—ï¸ Estructura del Proyecto\n\n`\nsrc/\nâ”œâ”€â”€ app/                          # App Router de Next.js\nâ”‚   â”œâ”€â”€ page.tsx                 # Landing page\nâ”‚   â”œâ”€â”€ pricing/                 # PÃ¡gina de precios\nâ”‚   â”œâ”€â”€ auth/                    # AutenticaciÃ³n\nâ”‚   â”œâ”€â”€ dashboard/               # Panel del usuario\nâ”‚   â”‚   â”œâ”€â”€ page.tsx            # Dashboard principal\nâ”‚   â”‚   â”œâ”€â”€ sessions/           # GestiÃ³n de sesiones\nâ”‚   â”‚   â”œâ”€â”€ upgrade/            # Actualizar plan\nâ”‚   â”‚   â””â”€â”€ settings/           # ConfiguraciÃ³n\nâ”‚   â””â”€â”€ admin/                   # Panel de administraciÃ³n\nâ”‚       â”œâ”€â”€ plans/              # GestiÃ³n de planes\nâ”‚       â”œâ”€â”€ users/              # GestiÃ³n de usuarios\nâ”‚       â””â”€â”€ memberships/        # GestiÃ³n de membresÃ­as\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ ui/                     # Componentes base (shadcn/ui)\nâ”‚   â””â”€â”€ dashboard/              # Componentes especÃ­ficos\nâ”œâ”€â”€ store/                      # Estado global (Zustand)\nâ”‚   â”œâ”€â”€ auth.ts                # AutenticaciÃ³n\nâ”‚   â”œâ”€â”€ sessions.ts            # Sesiones WhatsApp\nâ”‚   â””â”€â”€ plans.ts               # Planes y pagos\nâ”œâ”€â”€ lib/                       # Utilidades\nâ”‚   â”œâ”€â”€ api.ts                 # Cliente API\nâ”‚   â”œâ”€â”€ plans.ts               # LÃ³gica de planes\nâ”‚   â””â”€â”€ utils.ts               # Utilidades generales\nâ””â”€â”€ types/                     # Definiciones TypeScript\n`\n\n## ğŸ”§ ConfiguraciÃ³n\n\n### Variables de Entorno\n`env\n# API Backend\nNEXT_PUBLIC_API_URL=https://backend.autosystemprojects.site\n\n# PayPal\nNEXT_PUBLIC_PAYPAL_CLIENT_ID=your_paypal_client_id\nPAYPAL_CLIENT_SECRET=your_paypal_secret\n\n# Entorno\nNODE_ENV=development\n`\n\n### InstalaciÃ³n\n`bash\n# Instalar dependencias\nnpm install\n\n# Ejecutar en desarrollo\nnpm run dev\n\n# Construir para producciÃ³n\nnpm run build\nnpm start\n`\n\n## ğŸ“¡ Endpoints de la API\n\n### AutenticaciÃ³n\n- `POST /api/auth/signup` - Registro de usuario\n- `POST /api/auth/signin` - Inicio de sesiÃ³n\n- `POST /api/auth/deleteUser/` - Eliminar usuario\n- `POST /api/auth/renew-membership` - Renovar membresÃ­a\n\n### Sesiones WhatsApp\n- `GET /sessions/list` - Listar sesiones\n- `POST /sessions/add` - Crear sesiÃ³n (form-data)\n- `DELETE /sessions/delete/{id}` - Eliminar sesiÃ³n\n- `GET /sessions/status/{id}` - Estado de sesiÃ³n\n\n### Chats\n- `POST /chats/send?id={sessionId}` - Enviar mensaje\n- `GET /chats?id={sessionId}` - Listar chats\n- `GET /chats/{jid}?id={sessionId}` - ConversaciÃ³n especÃ­fica\n\n## ğŸ’³ Flujo de Pagos\n\n1. **SelecciÃ³n de Plan**: Usuario elige plan en `/pricing` o `/dashboard/upgrade`\n2. **ConfiguraciÃ³n PayPal**: SDK se carga automÃ¡ticamente\n3. **Procesamiento**: PayPal maneja el pago de forma segura\n4. **ConfirmaciÃ³n**: Callback actualiza la membresÃ­a del usuario\n5. **ActivaciÃ³n**: Nuevo token JWT con plan actualizado\n6. **RedirecciÃ³n**: Usuario regresa al dashboard con plan activo\n\n## ğŸ”„ Flujo de Sesiones\n\n1. **ValidaciÃ³n**: Verificar lÃ­mites segÃºn plan del usuario\n2. **Limpieza**: Eliminar sesiones previas (deleteUser + deleteSession)\n3. **CreaciÃ³n**: POST a `/sessions/add` con datos del bot\n4. **CÃ³digo**: Backend retorna cÃ³digo de 6 dÃ­gitos (30s)\n5. **VerificaciÃ³n**: Usuario ingresa cÃ³digo en WhatsApp\n6. **Monitoreo**: Polling automÃ¡tico del estado cada 5s\n7. **ConexiÃ³n**: Estado cambia a 'connected' cuando es exitoso\n\n## ğŸ¯ CaracterÃ­sticas TÃ©cnicas\n\n- **Next.js 14** con App Router\n- **TypeScript** para type-safety\n- **Tailwind CSS** para estilos\n- **Zustand** para estado global\n- **React Hook Form** con validaciÃ³n Zod\n- **Axios** para llamadas HTTP\n- **JWT** para autenticaciÃ³n\n- **PayPal SDK** para pagos\n- **Radix UI** para componentes base\n- **Lucide React** para iconos\n\n## ğŸš¦ Estados y Validaciones\n\n### Estados de SesiÃ³n\n- `connecting` - Estableciendo conexiÃ³n\n- `connected` - Conectado pero no autenticado\n- `authenticated` - Completamente funcional\n- `disconnecting` - Desconectando\n- `disconnected` - Sin conexiÃ³n\n\n### LÃ­mites por Plan\n- **BÃ¡sico/Mensual/Semestral/Anual**: 1 sesiÃ³n mÃ¡ximo\n- **Vitalicio**: 15 sesiones mÃ¡ximo\n- ValidaciÃ³n en frontend y backend\n- Mensajes informativos al usuario\n\n### ExpiraciÃ³n de MembresÃ­a\n- Alertas a los 7 dÃ­as de expiraciÃ³n\n- Bloqueo de funciones al expirar\n- Botones de renovaciÃ³n prominentes\n- CÃ¡lculo automÃ¡tico de dÃ­as restantes\n\n## ğŸ”’ Seguridad Implementada\n\n- Headers CORS configurados\n- ValidaciÃ³n de tokens JWT\n- SanitizaciÃ³n de inputs\n- LÃ­mites de rate limiting\n- EncriptaciÃ³n SSL para pagos\n- ProtecciÃ³n contra XSS y CSRF\n- ValidaciÃ³n de esquemas con Zod\n\n## ğŸ“ˆ PrÃ³ximas Funcionalidades\n\n- [ ] Webhooks para eventos de WhatsApp\n- [ ] Plantillas de mensajes\n- [ ] ProgramaciÃ³n de mensajes\n- [ ] Analytics avanzados\n- [ ] API para integraciones\n- [ ] Chat en vivo con clientes\n- [ ] CampaÃ±as masivas\n- [ ] IntegraciÃ³n con CRM\n\n---\n\n**Desarrollado con â¤ï¸ para automatizaciÃ³n de WhatsApp Business**\n
